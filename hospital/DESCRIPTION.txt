The invention describes an electronic portal for healthcare data dissemination and data-management built atop a public-key infrastructure system. The invention is intended to replace centralized and closed healthcare information management and distribution systems, which are typically commercial products sold and licensed by specific companies. This invention has at least two major advantages over: the open structure created by the layering of a health management system over an open public key encryption layer allows hospitals, health providers and governments to interact with and monitor users, doctors, health departments, hospitals laboratories and other commercial service providers, and even non-governmental organisations without the need for intrusive management or pre-approval; the independent users of the system may also customise their software install as required by law, commercial pressures or the practical realities of providing health services in order to achieve efficiencies and manage privacy concerns while respecting their particular software integration.



On the lowest layer of the invention, we specify the existence of a public-key infrastructure network. This network requires that users are able to generate a public/private keypair that can be used to uniquely identify them throughout the network. A permissions database may be installed on one or more nodes in the network to assist individuals play roles in the system by assigning them "roles" which correspond to permissions in the system. This can be done in a decentralised fashion by having users cryptographically sign messages which authorise (in perpetuity or for limited amounts of time) other users. A department can sign cryptographic messages authorising doctors to create appointment slots on the system for the public to signup and use, or revote the permissions of doctors to do so, such as in the event that the government requires .



The system is open by default, so that any member of the general public can join the network for themselves simply by creating a keypair. In the event of spam issues, or if users require government or corporate pre-approval for billing, there may optionally be a central user or collection of users whose publickeys are hardcoded into the system as capable of authorising users for engaging with parts of the system. This authorisation can be done either by having the administrator whitelist the addresses, or having users broadcast cryptographic proofs of coverage (such as a signed message verifying that they are in a period of coverage) or even by having government departments or insurance companies setup a real-time and off-PKI service which checks in real-time which users (identified by the publickey or publickey-associated network address) are in periods of valid service and returning that information to those making requests for the information.



Because the publickeys that are used to identify patients and departments are pseudo anonymous, this practice guarantees a certain level of privacy for these sorts of "coverage-check" inquiries, even if they are performed outside this invention through traditional networks like checks with servers running on the traditional Internet.



In the interests, we specify that users on the network may use their privately-generated key pairs to generate shared secrets. This can be done, for instance, by using Diffie-Hellman key exchange method in combination with the users' privately-generated keypairs to generate a shared secret that can be used to encrypt data in traffic, guaranteeing the privacy of user health data.  All subsequent data transfers described in this document can in this manner be setup for exchange in fully-encrypted fashion, such that patient and administrative privacy may be guaranteed even though the data itself.



The first although optional module for the system is the patient booking application. This module consists of an application which installs atop the PKI network. This module sits atop the network and receives messages . On the receipt of a message for the user (or for an address which the user is monitoring) it passes it up to whichever module processes messages of this type. While a naive implementation has the protocol in the message itself specify which module should interpret it, we specify that modules in this system may also optionally describe what type of messages they would prefer to receive. In this manner a NGO may program a module which listens for appointment bookings and monitors the performance of all hospitals in a region, combining the appointment data-flows with other information they are receiving on-chain to create an independent and cryptographically-secure third-party monitoring system.



The booking system allows users to peruse which hospitals, doctors, clinics or other organisations that offer healthcare services have slots available for booking.  When organisations have appointments available, they broadcast this information over the PKI distribution network using a data-protocol that permits all listening recipients to determine that new slots are available for booking. The price, location and other information associated with the slot can be included in the signed cryptographic appointment announcements. Users may then book these slots by broadcasting appointment-booking requests over the same or different PKI network. A third optional message may consist of the organisation broadcasting a final message that confirms that the appointment has been made and is unavailable for other users to book. In the event that the broadcast network that performs this task is a blockchain with a token worth monetary value, a payment or deposit for the appointment booking may be included with any of the user requests, either in direct payment for the service or as a deposit to ensure that the user shows up. Requests for appointments can also include cryptographic signatures provided by insurance companies or health care providers in guarantee of payment. Users who request bookings may have optional exchanges with their health care funders as part of the booking process through separate modules used to manage their state of insurance cover.



When users make an appointment in this system, their PKI-network associated data-store generates a secret known only to them. This secret is put through a one-way hash function (i.e. it is impossible to recover the original input, but said original input can be easily confirmed as the valid one on its provision by putting it through the same one-way function and confirming that the output is identical. This hashed-secret is provided to the hospital or appointment-provider at the time of booking. When the patient shows up at the hospital, they then provide the original secret to the healthcare provider. The healthcare provider - on receipt of the secret - may broadcast it . This provides fully transparent proof that the patient the hospital has seen is the original patient that made the request, eliminating common practices of patient-swapping that are common in many parts of the world, or the sale of pre-booked appointments to wealth patients, as frequently happens in healthcare systems that lack transparency. By broadcasting the original patient's secret data, the hospital may thus prove to any parties listening for their exchange of messages involving this patient that they have seen the correct patient and only the correct patient. Government departments and NGOs monitoring the PKI distribution network can thus monitor the number of appointments that the healthcare system is making (in granular detail, as information on the type of appointment may be specified in the data-protocol for appointment booking). In the event that users make appointments and hospitals cancel, users may also provide empirical proof that service was not provided. This data may be monitored and used to improve the efficiency of the health system, and particularly the provision of health services covered by third party organisations such as governments or insurance companies.



Once patients have been admitted to the hospital, the PKI health coverage system may not be used in combination with an electronic health records module to improve the process of tracking and maintaining user health information. Remember that the PKI system now has accurately identified the user and is capable of generating fully encrypted but shareable data between them and employees of the hospital. Our invention takes advantage of this fact by adding a module which displays to users of the systems an interface which may be used to monitor and collect information on patient health data. In some hospitals, patients may be asked to use the module themselves to self-report health information, such as . In addition to taking place in the hospital, this sort of patient data-tracking can be used by patients in other locations, such as in labs or at home. This is more efficient that telephone tracking or private nurse visits. Patient compliance can also be monitored in real-time as the data-collection module may broadcast a message onto the PKI-distribution network announcing when the patient has completed the task.



If the electronic health records module is conducted on admission to the hospital, it would be sensible to have nurses or non-doctors perform the initial check, working with patients to gather data on critical health data such as their height, weight, resting heart-rate, blood pressures and other standard or critical-for-their-symptoms health data. This data may be promptly encrypted by either the user or the medical staff collecting it through the electronic health records collection module and broadcast across the PKI network in plaintext or encrypted form. We recommend that encrypted communications are used. If the patient receives the information from a nurse or doctor the electronic health records module can then update a data-store associated with the user's local keypair with the information. Over time this data store becomes a repository of health information, cryptographically signed by the collector and available to the patient at any time. It may be subsequently shared by the patient with other doctors or healthcare providers at any time. The structuring of the data exchanges meanwhile avoids problems of unencrypted data storage that leads to massive expensive in the design of private data-storage systems that require HIPPA and other forms of administrative compliance with user privacy and health records management restrictions.



This method of generating and exchange data avoids the traditional problem that medical systems have both generating reliable healthcare data (self-reporting is notoriously problematic) as well as managing that data. Once the electronic health records data has been collected, for instance, the invention may permit access to through the same or another module. This can be done by having the doctor or another administrator scan a QR code provided by the patient. This QR code may either contain the information directly itself, or contain a small amount of data that may be used to request the information. The request for information may be sent across the PKI data network, whereupon the recipient has a module installed which checks to see if the requesting party is authorised to see their health data, sharing if it desirable. The data may of course be shared in encrypted form, so as to preserve patient privacy.



At this point, we have described the beginnings of a hospital management system, built atop a PKI keypair and data-distribution network. This system as described is capable of supporting different "roles" of users (patients, doctors, health care organisations), permitting those users to broadcast their availability for appointment bookings, handle the process of confirming health coverage provision, booking appointments, and collecting and distributing healthcare data such that the ongoing process of accessing and interacting with the medical system generates - in a fairly painless manner - an electronic healthcare record which contains the individuals medical data.



The rest of this document builds atop this basic invention, by specifying additional modules which are intended to plug into this system to provide novel medical services which are not possible or very difficult to implement in the sort of traditional hospital management systems.



One example of such an application is a doctor-management system that straddles across different hospitals or health organisations. This practice - having doctors serve patients in multiple hospitals - is extremely common in some countries. Patients will often wish to follow particular doctors, making appointments with them more than with specific hospitals. The appointment booking system may support this functionality by having both departments authorise the doctor to generate appointment timeslots in their hospitals at the times which they will be available. The doctors may then individually setup their schedules as convenient to them. The hospital departments may then use an "appointment monitoring" applications to monitor the PKI network and see how many staff are available and working on specific days. This allows administrators to take a more hands-off role in managing staffing levels. The modules may also automatically monitor staffing and flag for administrators that intervention is required (or additional staff should be hired) only if the number of appointments falls below some specified minimum, or if there are too many staff available relative to patient demand.



An additional module may be installed in user wallets that accesses this above appointment data to provide punchclock system for staff. The same department that uses the PKI network to create appointment bookings and schedule their staff may require their staff to sign-in on arrival to the hospital and automatically monitor compliance with required on-shift hours. An easy way to do this is for staff to scan a QR code on arrival with their phones (which are running PKI network terminals), and have their phones send a formatted message which cryptographically signs a secret provided by the administrative machine and thus confirms that they were physically in the hospital itself. With the use of pre-commitment secrets and one-way hash functions, it is possible for the hospitals to generate QR codes that can be proven to be deterministic after-the-fact but that cannot be gamed in advance: stuff must show up and broadcast a message. As part of the sign-in process, the hospital may send the doctors a cryptographic signature authorising them to use parts of the hospital that day. This cryptographic signature may be used, for instance, by attaching it to other transactions that are sent over the PKI network, such as requests to schedule follow-up appointments by patients at other times, in other hospitals, or by other staff. Or when requesting lab tests, X-rays, MRI scans, issuing prescriptions or providing other types of hospital services which stretch across departments and have traditionally been handled through proprietary and closed computer networks or old-school and somewhat illegible physical signatures.



Just as doctors can order lab tests, x-rays and schedule appointments elsewhere in the hospital (or across hospitals) pharmacy orders and prescriptions may be handled through the addition of a pharmacy module. Doctors using the exact same keypair that identifies them in other modules may use an interface running on their computer, tablet, phone or other device to order prescriptions for patients. The standard protocol for prescriptions should include information on which patient should receive the prescriptions, which doctor is prescribing them, length of prescription, and any allergies or other information the pharmacist may need to process or double-check the issue. The information contained in the patient electronic health record data-store may be included (or referenced) as well, containing a history of patient responses to similar or difference drugs. In the near future, IOT devices that broadcast on the PKI network may even be added to pill-administration mechanisms, such that the drug-delivery pills or devices may broadcast when patients take their medicine. The doctor, patient and perhaps pharmacy modules listen on the PKI network for these alerts to create a real-time generated history of patient medical care.



In standard medical treatment health monitoring tests such as blood tests, various forms of genetic or bio-response screenings are frequently done. It would be beneficial to have the information concerning these tests circulate in a way that benefits drug makers (who can test the efficacy of their drugs), doctors (who can determine the relative safety and efficacy of their treatments) and patients (who are the source of much of the bio-data collected and should be in a position to benefit from it. The biobank module is intended to provide all of these services. 



Once installed into the overarching electronic health management system that operates atop the PKI network layer, the biobank module provides a mechanism for lab technicians to input the biometric data associated with the test into the module or interface. This can be done through manual input of test results, through the use of ancillary machines that read the outputs of existing products and digitise the results, or automatically - an A.I. module installed in the hospital management system can receive a digital image of an X-Ray and perform diagnostic analysis on it, for instance, forwarding only the results of the diagnostic analysis. The data collected from the biobank tests is then added to a network message by the biobank module. If the data is sensitive to a customer, it may be encrypted with a secret key known only to the customer and possibly other nodes on the network. The data may also be encrypted and controlled by the hospital or laboratory.



The module attaches this information to a message that will be propagated across the network, whereupon other modules can receive the information and access the health biodata results, such as geonomic information, white blood cell count and other biometric markers. Because the transmitted message may contains details on the patients, pharmaceutical manufacturers can listen on the network for these messages, and compile. The data may also be used by pharmaceutical companies as an input into supply-chain management module which track the amount of drugs which have been used, their efficacy. 



We specify that this innovation may also include a module that allows insurance companies, pharmaceutical companies and other organisations which can monetise health data to listen directly on the PKI network for messages which contain valuable patient or genomic data in encrypted form. The module supports the research and development programs at these companies, while also assisting the hospitals and laboratories that install the module themselves. By providing a standardised way for organisations to send and receive clinical data in encrypted form, this module (or a separate data-permissions negotiation module) can 
